/**
 * @license RequireJS 2.1.10 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/requirejs for details
 */

/**
 * @license RequireJS text 2.0.10 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

!function(){var requirejs,require,define;!function(ca){function G(e){return"[object Function]"===N.call(e)}function H(e){return"[object Array]"===N.call(e)}function v(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function U(e,t){if(e){var n;for(n=e.length-1;-1<n&&(!e[n]||!t(e[n],n,e));n-=1);}}function s(e,t){return ga.call(e,t)}function j(e,t){return s(e,t)&&e[t]}function B(e,t){for(var n in e)if(s(e,n)&&t(e[n],n))break}function V(e,t,n,i){return t&&B(t,function(t,r){!n&&s(e,r)||(!i||"object"!=typeof t||!t||H(t)||G(t)||t instanceof RegExp?e[r]=t:(e[r]||(e[r]={}),V(e[r],t,n,i)))}),e}function t(e,t){return function(){return t.apply(e,arguments)}}function da(e){throw e}function ea(e){if(!e)return e;var t=ca;return v(e.split("."),function(e){t=t[e]}),t}function C(e,t,n,i){return t=Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e),t.requireType=e,t.requireModules=i,n&&(t.originalError=n),t}function ha(e){function n(e,t,n){var i,r,o,s,a,u,c,f=t&&t.split("/");r=f;var p=q.map,l=p&&p["*"];if(e&&"."===e.charAt(0))if(t){for(r=f.slice(0,f.length-1),e=e.split("/"),t=e.length-1,q.nodeIdCompat&&R.test(e[t])&&(e[t]=e[t].replace(R,"")),r=e=r.concat(e),s=r.length,t=0;t<s;t++)if(o=r[t],"."===o)r.splice(t,1),t-=1;else if(".."===o){if(1===t&&(".."===r[2]||".."===r[0]))break;0<t&&(r.splice(t-1,2),t-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if(n&&p&&(f||l)){r=e.split("/"),t=r.length;e:for(;0<t;t-=1){if(s=r.slice(0,t).join("/"),f)for(o=f.length;0<o;o-=1)if((n=j(p,f.slice(0,o).join("/")))&&(n=j(n,s))){i=n,a=t;break e}!u&&l&&j(l,s)&&(u=j(l,s),c=t)}!i&&u&&(i=u,a=c),i&&(r.splice(0,a,i),e=r.join("/"))}return(i=j(q.pkgs,e))?i:e}function i(e){z&&v(document.getElementsByTagName("script"),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===E.contextName)return t.parentNode.removeChild(t),!0})}function r(e){var t=j(q.paths,e);if(t&&H(t)&&1<t.length)return t.shift(),E.require.undef(e),E.require([e]),!0}function o(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function a(e,t,i,r){var s,a,u=null,c=t?t.name:null,f=e,p=!0,l="";return e||(p=!1,e="_@r"+(I+=1)),e=o(e),u=e[0],e=e[1],u&&(u=n(u,c,r),a=j(T,u)),e&&(u?l=a&&a.normalize?a.normalize(e,function(e){return n(e,c,r)}):n(e,c,r):(l=n(e,c,r),e=o(l),u=e[0],l=e[1],i=!0,s=E.nameToUrl(l))),i=!u||a||i?"":"_unnormalized"+(_+=1),{prefix:u,name:l,parentMap:t,unnormalized:!!i,url:s,originalName:f,isDefine:p,id:(u?u+"!"+l:l)+i}}function u(e){var t=e.id,n=j($,t);return n||(n=$[t]=new E.Module(e)),n}function c(e,t,n){var i=e.id,r=j($,i);!s(T,i)||r&&!r.defineEmitComplete?(r=u(e),r.error&&"error"===t?n(r.error):r.on(t,n)):"defined"===t&&n(T[i])}function f(e,t){var n=e.requireModules,i=!1;t?t(e):(v(n,function(t){(t=j($,t))&&(t.error=e,t.events.error&&(i=!0,t.emit("error",e)))}),i||h.onError(e))}function p(){S.length&&(ia.apply(A,[A.length,0].concat(S)),S=[])}function l(e){delete $[e],delete k[e]}function d(e,t,n){var i=e.map.id;e.error?e.emit("error",e.error):(t[i]=!0,v(e.depMaps,function(i,r){var o=i.id,s=j($,o);s&&!e.depMatched[r]&&!n[o]&&(j(t,o)?(e.defineDep(r,T[o]),e.check()):d(s,t,n))}),n[i]=!0)}function g(){var e,t,n=(e=1e3*q.waitSeconds)&&E.startTime+e<(new Date).getTime(),o=[],s=[],a=!1,u=!0;if(!w){if(w=!0,B(k,function(e){var c=e.map,f=c.id;if(e.enabled&&(c.isDefine||s.push(e),!e.error))if(!e.inited&&n)r(f)?a=t=!0:(o.push(f),i(f));else if(!e.inited&&e.fetched&&c.isDefine&&(a=!0,!c.prefix))return u=!1}),n&&o.length)return e=C("timeout","Load timeout for modules: "+o,null,o),e.contextName=E.contextName,f(e);u&&v(s,function(e){d(e,{},{})}),n&&!t||!a||!z&&!fa||L||(L=setTimeout(function(){L=0,g()},50)),w=!1}}function m(e){s(T,e[0])||u(a(e[0],null,!0)).init(e[1],e[2])}function y(e){var e=e.currentTarget||e.srcElement,t=E.onScriptLoad;return e.detachEvent&&!Z?e.detachEvent("onreadystatechange",t):e.removeEventListener("load",t,!1),t=E.onScriptError,(!e.detachEvent||Z)&&e.removeEventListener("error",t,!1),{node:e,id:e&&e.getAttribute("data-requiremodule")}}function b(){var e;for(p();A.length;){if(e=A.shift(),null===e[0])return f(C("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));m(e)}}var w,x,E,N,L,q={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},$={},k={},M={},A=[],T={},D={},F={},I=1,_=1;return N={require:function(e){return e.require?e.require:e.require=E.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?e.exports:e.exports=T[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return j(q.config,e.map.id)||{}},exports:N.exports(e)}}},x=function(e){this.events=j(M,e.id)||{},this.map=e,this.shim=j(q.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},x.prototype={init:function(e,n,i,r){r=r||{},this.inited||(this.factory=n,i?this.on("error",i):this.events.error&&(i=t(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=i,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,E.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();E.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],t(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;D[e]||(D[e]=!0,E.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id;t=this.depExports;var i=this.exports,r=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,1>this.depCount&&!this.defined){if(G(r)){if(this.events.error&&this.map.isDefine||h.onError!==da)try{i=E.execCb(n,r,t,i)}catch(t){e=t}else i=E.execCb(n,r,t,i);if(this.map.isDefine&&void 0===i&&((t=this.module)?i=t.exports:this.usingExports&&(i=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",f(this.error=e)}else i=r;this.exports=i,this.map.isDefine&&!this.ignore&&(T[n]=i,h.onResourceLoad)&&h.onResourceLoad(E,this.map,this.depMaps),l(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,i=e.id,r=a(e.prefix);this.depMaps.push(r),c(r,"defined",t(this,function(r){var o,p;p=j(F,this.map.id);var d=this.map.name,g=this.map.parentMap?this.map.parentMap.name:null,m=E.makeRequire(e.parentMap,{enableBuildCallback:!0});this.map.unnormalized?(r.normalize&&(d=r.normalize(d,function(e){return n(e,g,!0)})||""),r=a(e.prefix+"!"+d,this.map.parentMap),c(r,"defined",t(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),(p=j($,r.id))&&(this.depMaps.push(r),this.events.error&&p.on("error",t(this,function(e){this.emit("error",e)})),p.enable())):p?(this.map.url=E.nameToUrl(p),this.load()):(o=t(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),o.error=t(this,function(e){this.inited=!0,this.error=e,e.requireModules=[i],B($,function(e){0===e.map.id.indexOf(i+"_unnormalized")&&l(e.map.id)}),f(e)}),o.fromText=t(this,function(t,n){var r=e.name,c=a(r),p=O;n&&(t=n),p&&(O=!1),u(c),s(q.config,i)&&(q.config[r]=q.config[i]);try{h.exec(t)}catch(e){return f(C("fromtexteval","fromText eval for "+i+" failed: "+e,e,[i]))}p&&(O=!0),this.depMaps.push(c),E.completeLoad(r),m([r],o)}),r.load(e.name,m,o,q))})),E.enable(r,this),this.pluginMaps[r.id]=r},enable:function(){k[this.map.id]=this,this.enabling=this.enabled=!0,v(this.depMaps,t(this,function(e,n){var i,r;if("string"==typeof e){if(e=a(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[n]=e,i=j(N,e.id))return void(this.depExports[n]=i(this));this.depCount+=1,c(e,"defined",t(this,function(e){this.defineDep(n,e),this.check()})),this.errback&&c(e,"error",t(this,this.errback))}i=e.id,r=$[i],!s(N,i)&&r&&!r.enabled&&E.enable(e,this)})),B(this.pluginMaps,t(this,function(e){var t=j($,e.id);t&&!t.enabled&&E.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){v(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},E={config:q,contextName:e,registry:$,defined:T,urlFetched:D,defQueue:A,Module:x,makeModuleMap:a,nextTick:h.nextTick,onError:f,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=q.shim,n={paths:!0,bundles:!0,config:!0,map:!0};B(e,function(e,t){n[t]?(q[t]||(q[t]={}),V(q[t],e,!0,!0)):q[t]=e}),e.bundles&&B(e.bundles,function(e,t){v(e,function(e){e!==t&&(F[e]=t)})}),e.shim&&(B(e.shim,function(e,n){H(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=E.makeShimExports(e)),t[n]=e}),q.shim=t),e.packages&&v(e.packages,function(e){var t,e="string"==typeof e?{name:e}:e;t=e.name,e.location&&(q.paths[t]=e.location),q.pkgs[t]=e.name+"/"+(e.main||"main").replace(ja,"").replace(R,"")}),B($,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=a(t))}),(e.deps||e.callback)&&E.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(ca,arguments)),t||e.exports&&ea(e.exports)}},makeRequire:function(t,r){function o(n,i,c){var p,l;return r.enableBuildCallback&&i&&G(i)&&(i.__requireJsBuild=!0),"string"==typeof n?G(i)?f(C("requireargs","Invalid require call"),c):t&&s(N,n)?N[n]($[t.id]):h.get?h.get(E,n,t,o):(p=a(n,t,!1,!0),p=p.id,s(T,p)?T[p]:f(C("notloaded",'Module name "'+p+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(b(),E.nextTick(function(){b(),l=u(a(null,t)),l.skipMap=r.skipMap,l.init(n,i,c,{enabled:!0}),g()}),o)}return r=r||{},V(o,{isBrowser:z,toUrl:function(e){var i,r=e.lastIndexOf("."),o=e.split("/")[0];return-1!==r&&("."!==o&&".."!==o||1<r)&&(i=e.substring(r,e.length),e=e.substring(0,r)),E.nameToUrl(n(e,t&&t.id,!0),i,!0)},defined:function(e){return s(T,a(e,t,!1,!0).id)},specified:function(e){return e=a(e,t,!1,!0).id,s(T,e)||s($,e)}}),t||(o.undef=function(e){p();var n=a(e,t,!0),r=j($,e);i(e),delete T[e],delete D[n.url],delete M[e],U(A,function(t,n){t[0]===e&&A.splice(n,1)}),r&&(r.events.defined&&(M[e]=r.events),l(e))}),o},enable:function(e){j($,e.id)&&u(e).enable()},completeLoad:function(e){var t,n,i=j(q.shim,e)||{},o=i.exports;for(p();A.length;){if(n=A.shift(),null===n[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);m(n)}if(n=j($,e),!t&&!s(T,e)&&n&&!n.inited){if(q.enforceDefine&&(!o||!ea(o)))return r(e)?void 0:f(C("nodefine","No define call for "+e,null,[e]));m([e,i.deps||[],i.exportsFn])}g()},nameToUrl:function(e,t,n){var i,r,o;if((i=j(q.pkgs,e))&&(e=i),i=j(F,e))return E.nameToUrl(i,t,n);if(h.jsExtRegExp.test(e))i=e+(t||"");else{for(i=q.paths,e=e.split("/"),r=e.length;0<r;r-=1)if(o=e.slice(0,r).join("/"),o=j(i,o)){H(o)&&(o=o[0]),e.splice(0,r,o);break}i=e.join("/"),i+=t||(/^data\:|\?/.test(i)||n?"":".js"),i=("/"===i.charAt(0)||i.match(/^[\w\+\.\-]+:/)?"":q.baseUrl)+i}return q.urlArgs?i+((-1===i.indexOf("?")?"?":"&")+q.urlArgs):i},load:function(e,t){h.load(E,e,t)},execCb:function(e,t,n,i){return t.apply(i,n)},onScriptLoad:function(e){("load"===e.type||ka.test((e.currentTarget||e.srcElement).readyState))&&(P=null,e=y(e),E.completeLoad(e.id))},onScriptError:function(e){var t=y(e);if(!r(t.id))return f(C("scripterror","Script error for: "+t.id,e,[t.id]))}},E.require=E.makeRequire(),E}var h,x,y,D,L,E,P,M,q,Q,la=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,ma=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,R=/\.js$/,ja=/^\.\//;x=Object.prototype;var N=x.toString,ga=x.hasOwnProperty,ia=Array.prototype.splice,z=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),fa=!z&&"undefined"!=typeof importScripts,ka=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Z="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),F={},r={},S=[],O=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(G(requirejs))return;r=requirejs,requirejs=void 0}"undefined"!=typeof require&&!G(require)&&(r=require,require=void 0),h=requirejs=function(e,t,n,i){var r,o="_";return!H(e)&&"string"!=typeof e&&(r=e,H(t)?(e=t,t=n,n=i):e=[]),r&&r.context&&(o=r.context),(i=j(F,o))||(i=F[o]=h.s.newContext(o)),r&&i.configure(r),i.require(e,t,n)},h.config=function(e){return h(e)},h.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=h),h.version="2.1.10",h.jsExtRegExp=/^\/|:|\?|\.js$/,h.isBrowser=z,x=h.s={contexts:F,newContext:ha},h({}),v(["toUrl","undef","defined","specified"],function(e){h[e]=function(){var t=F._;return t.require[e].apply(t,arguments)}}),z&&(y=x.head=document.getElementsByTagName("head")[0],D=document.getElementsByTagName("base")[0])&&(y=x.head=D.parentNode),h.onError=da,h.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},h.load=function(e,t,n){var i=e&&e.config||{};if(z)return i=h.createNode(i,t,n),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),!i.attachEvent||i.attachEvent.toString&&0>i.attachEvent.toString().indexOf("[native code")||Z?(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)):(O=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)),i.src=n,M=i,D?y.insertBefore(i,D):y.appendChild(i),M=null,i;if(fa)try{importScripts(n),e.completeLoad(t)}catch(i){e.onError(C("importscripts","importScripts failed for "+t+" at "+n,i,[t]))}},z&&!r.skipDataMain&&U(document.getElementsByTagName("script"),function(e){if(y||(y=e.parentNode),L=e.getAttribute("data-main"))return q=L,r.baseUrl||(E=q.split("/"),q=E.pop(),Q=E.length?E.join("/")+"/":"./",r.baseUrl=Q),q=q.replace(R,""),h.jsExtRegExp.test(q)&&(q=L),r.deps=r.deps?r.deps.concat(q):[q],!0}),define=function(e,t,n){var i,r;"string"!=typeof e&&(n=t,t=e,e=null),H(t)||(n=t,t=null),!t&&G(n)&&(t=[],n.length&&(n.toString().replace(la,"").replace(ma,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),O&&((i=M)||(P&&"interactive"===P.readyState||U(document.getElementsByTagName("script"),function(e){if("interactive"===e.readyState)return P=e}),i=P),i&&(e||(e=i.getAttribute("data-requiremodule")),r=F[i.getAttribute("data-requirecontext")])),(r?r.defQueue:S).push([e,t,n])},define.amd={jQuery:!0},h.exec=function(b){return eval(b)},h(r)}}(this),define("vendor/require/require-2.1.10.min.js",function(){}),function(e,t,n){"function"==typeof define&&define.amd?define("framework",[],function(){return e[n]=t()}):"object"==typeof module&&module.exports?module.exports=e[n]=t():e[n]=t()}(this,function(){var e=!0;return function(){var t,n,i,r,o,s,a,u,c,f,p,l,d;t=function(){var e,t,n={},i={init:function(e){console.log("init:",window._?"LODASH/UNDERSCORE!":"(no lodash/underscore)"),n=e||window._||n,t.extend(t,n)},clone:function(e,n,r,o,s){n=n||(t.isArray(e)?[]:{}),o=o||t.noop;for(var a in e)!e.hasOwnProperty(a)||s&&!t.isUndefined(n[a])||(n[a]=r&&t.isObject(e[a])?i.clone(e[a],null,!0):o(e[a],a,n));return n},cloneDeep:function(e,t,n){return i.clone(e,t,!0,n)},cookie:function(e){var t=document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)");return t?t.pop():""},defaults:function(e,t,n){return i.clone(t,e,!!n,null,!0)},defaultsDeep:function(e,t){return i.defaults(e,t,!0)},each:function(e,n,i){if(t.isArray(e))e.forEach(n.bind(i||window));else for(var r in e)n.bind(i||window)(e[r],r,e)},extend:function(e,t,n){return i.clone(t,e,!!n)},filter:function(e,t,n){var r=[];for(var o in e)if(i.isEqual(e[o],t,o)&&(r.push(e[o]),n))break;return n?r[0]:r},find:function(e,n){return t.filter(e,n,!0)},findWhere:function(e,n){return t.find(e,n)},get:function(e,n,i){var r,o=e.hasOwnProperty(n)?[n]:t.isArray(n)?n:n.split(/[\[\].:]+/),s=function(e,n,o,s){return"*"===n&&t.isObject(e)?Object.keys(e).reduce(function(n,i){r=!0;var a=t.get(e[i],s.slice(o+1));return t.isUndefined(a)?n:n.concat(a)},[]):e===i||t.isUndefined(e[n])?r&&e.length?e:i:e[n]};return o.reduce(s,e)},getProp:function(e,n){var i=t.isArray(n)?n:n.split(":"),r=i.slice(-1)[0],o={};return o[r]=t.get(e,i.join(".")),o},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},isBoolean:function(e){return"boolean"==typeof e},isDomSelection:function(e){return t.isNodeList(e)||t.isNode(e)||t.isJquery(e)},isEqual:function(e,n,r){if(!t.isObject(e)&&!t.isFunction(n)&&typeof e!=typeof n)return!1;if(t.isBoolean(n))return!!e===n;if(t.isFunction(n))return n(e,isNaN(r)?r:+r);if(t.isObject(n)){for(var o in n)if(n.hasOwnProperty(o)&&(!e.hasOwnProperty(o)||!i.isEqual(e[o],n[o])))return!1;return!0}return t.isObject(e)?e[n]:e===n},isFunction:function(e){return"function"==typeof e},isIE:function(){return"function"==typeof ScriptEngineMajorVersion?ScriptEngineMajorVersion():void 0}(),isJquery:function(e){return window.jQuery&&e instanceof window.jQuery},isNode:function(e){return"[object HTMLElement]"===Object.prototype.toString.call(e)},isNodeList:function(e){return"[object NodeList]"===Object.prototype.toString.call(e)},isObject:function(e,t){return t?"[object Object]"===Object.prototype.toString.call(e):"object"==typeof e},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},isString:function(e){return"string"==typeof e},isUndefined:function(e){return"undefined"==typeof e},noop:function(e){return e},object:function(e,n){var i=t.isArray(e[0]);return e.reduce(function(e,t,r){return e[i?t[0]:t]=i?t[1]:n[r],e},{})},omit:function(e,n){return t.pick2(e,t.isArray(n)?n:t.toArray(arguments).slice(1),!0)},pick:function(e,n){return t.pick2(e,t.isArray(n)?n:t.toArray(arguments).slice(1))},pick2:function(e,t,n){return Object.keys(e).reduce(function(i,r){var o=t.indexOf(r)>=0;return(o&&!n||!o&&n)&&(i[r]=e[r]),i},{})},randomString:function(e){return Array(e+1).join((Math.random().toString(36)+"00000000000000000").slice(2,18)).slice(0,e)},serialise:function(e,t){var n=[];for(var i in e)if(e.hasOwnProperty(i)){var r=t?t+"["+i+"]":i,o=e[i];n.push("object"==typeof o?this.serialise(o,r):encodeURIComponent(r)+"="+encodeURIComponent(o))}return n.join("&")},storage:function(e){var t=new Date,n=function(t,n){this.data=function(t,n){try{var i=e[t+"Storage"];i.setItem(n,n);var r=i.getItem(n)==n;return i.removeItem(n),r&&i}catch(e){}}(t,n),this.setItem=function(e,t){this.data&&this.data.setItem(e,JSON.stringify(t))},this.getItem=function(e,t){if(this.data){var n=this.data.getItem(e);return t!==!1?JSON.parse(n):n}},this.removeItem=function(e){this.data&&this.data.removeItem(e)}};return{local:new n("local",t),session:new n("session",t)}}(window),template:function(n){var i=/\W/.test(n)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+n.replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<%=(.+?)%>/g,"',$1,'").replace(/{{(.+?)}}/g,"',$1,'").split("<%").join("');").split("%>").join("p.push('")+"');}return p.join('');"):e[n]=e[n]||this.template($(n)[0].innerHTML);return function(e){return i(t.defaults(e,{_:t}))}},toArray:function(e){return[].slice.call(e)},uniq:function(e){return e.filter(function(e,t,n){return n.indexOf(e)===t})},xpathToSelector:function(e){return e.replace(/^xpath:\/\//,"").split("/").reduce(function(e,t){return e.concat(t.replace(/\[(\d+)\]|$/,function(e,t){return":nth-of-type("+(t||1)+")"}))},[]).join(" ")}};t={};for(var r in i)!function(e){Object.defineProperty(t,e,{get:function(){return n[e]||i[e]}})}(r);return t}(),n=function(e){var t={$event:window,props:{},data:{},init:function(n,i,r){this.props.hasOwnProperty(n)||(this.data[n]={},this.props[n]={});var o=this.props[n],s=this.data[n],a={on:function(i,r){return e.each(i.split(" "),function(e){return":"===e.slice(0,1)?t.on(t.event(e.slice(1)),r):void t.on(t.event(n,e),r)}),a},off:function(i){return e.each(i.split(" "),function(e){e=":"===e.slice(0,1)?t.event(e.slice(1)):t.event(n,i),t.off(e)}),a},get:function(n){return":"===n.slice(0,1)?t.get(n.slice(1)):n.split(":").reduce(function(t,n){return e.isUndefined(t)?t:t[n]},s)},set:function(n,i,r){e.isString(n)?n=e.object([n],[i]):r=i;return e.each(n,function(n,i){if(":"===i.slice(0,1))return t.get(i.slice(1),n,r);var u,c=i.split(":"),f=c.shift(),p=c.length?e.isObject(s[f])?s[f]:{}:n;s.hasOwnProperty(f)||(r!==!0&&(u=!1),Object.defineProperty(o,f,{enumerable:!0,configurable:!0,get:function(){return s[f]},set:function(e){s[f]!==e&&(s[f]=e,a.history(f,e),a.trigger(f))}})),c.length?c.reduce(function(t,i,r){return r+1<c.length?(e.isObject(t[i])||(t[i]={}),t[i]):(e.isUndefined(t)&&(t={}),e.isUndefined(u)&&(u=t[i]!==n),t[i]=n,void 0)},p):e.isUndefined(u)&&(u=s[f]!==p),s[f]=p,a.history(f,p),(r===!0||u&&r!==!1)&&a.trigger(i)}),a},trigger:function(i){e.isString(i)&&(i=[i]);var r=e.toArray(arguments).slice(1);return e.each(i,function(i){a.history(i,r,!0),e.each(i.split(":"),function(i,o,u){var c=u.slice(0,u.length-o),f=c.join(":"),p=e.getProp(s,c),l=r.length?r:[p[c.slice(-1)[0]]],d=":"===f.slice(0,1)?t.event(f.slice(1)):t.event(n,f);l=1===l.length?l.concat(p,a):l.concat(a),t.$event.trigger(d,l)})}),a},unset:function(i){e.isString(i)&&(i=[i]),e.each(i,function(e){var i=e.split(":"),r=""===i[0]?i[1]:n,o=""===i[0]?i[2]:i[0];delete t.data[r][o]})},history:function(e,i,o){r&&t.history.append(o?[n,e,i]:[n+":"+e,i])},props:o,raw:s};return e.isObject(i)&&a.set(i,!1),a},get:function(t,n,i){if(!(t.indexOf(":")<=0)){var r=t.split(":"),o=this.init(r[0]),s=r.slice(1).join(":");return e.isUndefined(n)||o.set(s,n,i),o.get(s)}},on:function(n,i){return!t.$event.on&&window.jQuery&&(t.$event=window.jQuery(window)),e.each(n.split(" "),function(n){t.$event.on(t.event(n),function(){e.isFunction(i)&&i.apply(this,e.toArray(arguments).slice(1))})}),t},off:function(n,i){return e.each(n.split(" "),function(e){i?t.$event.off(t.event(e),i):t.$event.off(t.event(e))}),t},event:function(t){return"app-props:"+e.toArray(arguments).join(":").replace(/app-props:/g,"")},history:{log:{pre:e.storage.session&&e.storage.session.getItem("app-props:history")||[],current:[]},reload:function(){if(t.history.log.pre.length){t.history.reloading=!0,console.log("History:",t.history.log.pre.length);var n=t.history.log.pre.slice(),i=function(){var r=n.shift(),o=JSON.parse(r,function(t,n){return/^xpath:\/\//.test(n)?document.querySelector(e.xpathToSelector(n)):n});if(o.length>2){console.log("trigger:",o);var s=t.init(o[0]);s.trigger.apply(t,[o[1]].concat(o[2]))}else console.log("props:",o),t.get.apply(t,o);return n.length?setTimeout(i,0):(t.history.log.current=t.history.log.pre.slice(),t.history.reloading=!1,void t.history.save())};i()}},append:function(e){t.history.reloading||(t.history.log.current.push(JSON.stringify(e)),t.history.save())},save:function(){e.storage.session&&e.storage.session.setItem(t.event("history"),t.history.log.current)}}};return t}(t),i=function(e){var t={fn:{init:function(){Node.prototype.removeAttr=NodeList.prototype.removeAttr=t.fn.removeAttr,Node.prototype.attr=NodeList.prototype.attr=t.fn.attr,Node.prototype.data=NodeList.prototype.data=t.fn.data},removeAttr:function(e){return this.forEach(function(t){t.removeAttribute(e)}),this},attr:function(n,i){var r=e.toArray(arguments);return r.length>2&&(r.length=2),t.fn.set.apply(this,r)},data:function(n,i){if(1===arguments.length&&e.isString(n))return t.fn.set.call(e.isNodeList(this)?this[0]:this,n,void 0,!0);var r={};return e.isObject(n)?e.extend(r,n,!0):r[n]=i,t.fn.set.call(this,r,void 0,!0),this},set:function(n,i,r){if(e.isNodeList(this))return 1===arguments.length&&e.isString(n)?this[0]?this[0].getAttribute(n):void 0:(this.forEach(function(e){t.fn.set.apply(e,this)}.bind(arguments)),this);if(r&&!this._dataset&&(this._dataset=e.cloneDeep(this.dataset)),1===arguments.length||r&&e.isUndefined(i)){if(e.isString(n))return r?this._dataset[n]:this.getAttribute(n);for(var o in n)r?this._dataset[o]=n[o]:this.setAttribute(o,n[o])}else r?this._dataset[n]=i:this.setAttribute(n,i);return this}}};return t.fn}(t),r=function(e){var t={fn:{init:function(){Node.prototype.addClass=NodeList.prototype.addClass=t.fn.add,Node.prototype.removeClass=NodeList.prototype.removeClass=t.fn.remove,Node.prototype.toggleClass=NodeList.prototype.toggleClass=t.fn.toggle,Node.prototype.hasClass=NodeList.prototype.hasClass=t.fn.contains},get:function(){return this.reduce(function(t,n){return t.concat(e.toArray(n.classList))},[])},set:function(n,i,r,o){return e.isNodeList(n)?n.forEach(function(e){o?o.apply(e,r):t.fn.set(e,i,this)}.bind(r)):e.toArray(r).join(" ").split(" ").forEach(function(e){n.classList[i](e)}),n},add:function(){return t.fn.set(this,"add",arguments)},remove:function(){return t.fn.set(this,"remove",arguments)},toggle:function(n,i){return t.fn.set(this,"add",arguments,function(){e.isIE?(e.isUndefined(i)?this.classList.contains(n):i)?this.classList.add(n):this.classList.remove(n):this.classList.toggle(n,i)})},contains:function(t,n){if(e.isNodeList(this)){var i;return this.forEach(function(e,r){e.classList.contains(t)?n&&i!==!1?i=!0:n||(i=!0):n&&(i=!1)}),!!i}return this.classList.contains(t)}}};return t.fn}(t),o=function(e){var t={types:{DragEvent:["drag","dragend","dragenter","dragleave","dragover","dragstart","drop"],Event:["change","input","invalid"],FocusEvent:["blur","focus"],KeyboardEvent:["keydown","keypress","keyup"],MouseEvent:["click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup"],TouchEvent:["touchcancel","touchend","touchenter","touchleave","touchmove","touchstart"],WheelEvent:["wheel"]},list:[],data:{},fn:{init:function(){NodeList.prototype.on=NodeList.prototype.addEventListener=t.fn.on.all,Node.prototype.on=window.on=t.fn.on.event,XMLHttpRequest.prototype.on=t.fn.on.xhr,NodeList.prototype.off=NodeList.prototype.removeEventListener=t.fn.off.all,Node.prototype.off=window.off=XMLHttpRequest.prototype.off=t.fn.off.event,NodeList.prototype.trigger=t.fn.trigger.all,Node.prototype.trigger=window.trigger=t.fn.trigger.event,t.types.list={ref:{}};for(var e in t.types)"list"!==e&&t.types[e].forEach(function(n){t.types.list[n]=window[e],t.types.list.ref[n]=e})},on:{all:function(e,t,n){return this.forEach(function(i){i.on(e,t||n,!!t&&n)}),this},event:function(n,i,r){return n.split(" ").forEach(function(n){var o=t.fn.type.e(n),s=t.fn.type.ns(n),a=function(n){var o=r?!!(n.delegateTarget=n.target.closest(i))&&n.target:this,s=n.detail||n.data,a=t.data[s];o&&(n.detail=0,(r||i).apply(o,a?e.toArray(arguments).concat(a):arguments))};t.list.push({$el:this,type:o,ns:s,fn:r||i,callback:a}),this.addEventListener(o,a)}.bind(this)),this},xhr:function(e,n){return t.fn.on.el.call(this,e,n),this}},off:{all:function(e,t){return this.forEach(function(e){e.off.apply(e,this)}.bind(arguments)),this},event:function(n,i){return i=arguments.length>1&&(i||!0),n.split(" ").forEach(function(n){if(n){var r=t.fn.type.e(n),o=t.fn.type.ns(n),s=e.filter(t.list,function(e,t){if(e.i=t,e.$el===this)return!(r&&e.type!==r||o&&e.ns.slice(-o.length)!==o||i&&e.fn!==i)}.bind(this));for(var a in s)t.list.splice(s[a].i,1),this.removeEventListener(s[a].type,s[a].callback)}}.bind(this)),this}},trigger:{all:function(e,t){return this.forEach(function(n){n.trigger(e,t)}),this},event:function(n,i){var r,o=+Math.random().toString().slice(2,11);t.data[o]=i,e.isIE?(r=document.createEvent(t.types.list.ref[n]||"Event"),r.initEvent(n,!0,!1),r.data=o,this.dispatchEvent(r)):(r=t.types.list[n]||CustomEvent,this.dispatchEvent(new r(n,{bubbles:!0,detail:o}))),delete t.data[o]}},type:{e:function(e){return e.replace(/\..*/,"")},ns:function(e){return e.replace(/^[^.]*\.?/,"")}}}};return t.fn}(t),s=function(e){var t={fn:{init:function(){Node.prototype.find=window.find=NodeList.prototype.find=t.fn.find,Node.prototype.parents=NodeList.prototype.parents=t.fn.parents,Node.prototype.path=NodeList.prototype.path=t.fn.path,Node.prototype.toJSON=Node.prototype.xpath=NodeList.prototype.xpath=t.fn.xpath,Node.prototype.closest=NodeList.prototype.closest=t.fn.closest},find:function(t){if(e.isNodeList(this)){var n="f"+(1e5*Math.random()|0);this.forEach(function(e){e.find(t).forEach(function(e){e.classList.add(n)})});var i=document.querySelectorAll("."+n);return i.forEach(function(e){e.classList.remove(n)}),i}var r=this===window?document:this;return r.querySelectorAll(t)},parents:function(t){if(e.isNodeList(this))return this.length>1?e.uniq(this.reduce(function(e,n){return e.concat(n.parents.call(this,t))},[])):this.parents.call(this[0],t);var n=this.path().slice(1);return t?n.filter(function(e){return e.is(t)}):n},path:function(t){if(e.isNodeList(this))return this.map(function(e){return e.path(t)});if(!this.$path||t){var n,i,r=this;for(this.$path=[],this.$xpath=[];r&&r!==document;r=r.parentNode){for(n=1,i=r.previousElementSibling;i;)i.tagName===r.tagName&&++n,i=i.previousElementSibling;this.$xpath.unshift(r.tagName+(n>1?"["+n+"]":"")),this.$path.push(r)}}return this.$path.slice()},xpath:function(t){return e.isNodeList(this)?this.map(function(e){return e.xpath(t)}):(this.path(t),"xpath://"+this.$xpath.slice(1).join("/").toLowerCase())},closest:function(t){return t?e.isNodeList(this)?this.length>1?e.uniq(this.reduce(function(e,n){return e.concat(n.closest.call(this,t))},[])):this.closest.call(this[0],t):e.find(this.path(),function(e){return e.is(t)}):[]}}};return t.fn}(t),a=function(e){var t={fn:{init:function(){NodeList.prototype.eq=t.fn.eq,Node.prototype.is=NodeList.prototype.is=t.fn.is,Node.prototype.clone=NodeList.prototype.clone=t.fn.clone,Node.prototype.before=NodeList.prototype.before=t.fn.before,Node.prototype.after=NodeList.prototype.after=t.fn.after,Node.prototype.prepend=NodeList.prototype.prepend=t.fn.prepend,Node.prototype.append=NodeList.prototype.append=t.fn.append,Node.prototype.text=NodeList.prototype.text=t.fn.text,Node.prototype.html=NodeList.prototype.html=t.fn.html,Node.prototype.val=NodeList.prototype.val=t.fn.val,Node.prototype.prop=NodeList.prototype.prop=t.fn.prop},el:function(n,i,r){if(e.isNodeList(n))n.forEach(function(e){t.fn.el(e,i,r)});else if(e.isString(r))return n.insertAdjacentHTML(i,r)},eq:function(e){return this[e]},is:function(t){var n=e.isNodeList(this)?this:[this];return n.reduce(function(n,i){return n||(e.isString(t)?e.isIE||i.msMatchesSelector?i.msMatchesSelector(t):i.matches(t):e.isNodeList(t)?t.is(i):t===i)},!1)},clone:function(){if(e.isNodeList(this)){var t=document.createDocumentFragment();return this.forEach(function(e){var n=e.cloneNode(!0);t.appendChild(n)}),t.childNodes}return this.cloneNode(!0)},val:function(e){return this.prop("value",e)},prop:function(t,n){var i=e.isNodeList(this)?this:[this];return 1===arguments.length&&e.isString(t)?(n=i[0]?i[0][t]:void 0,"true"===n||"false"!==n&&n):(e.isString(t)&&(t=e.object([t],[n])),i.forEach(function(e){for(var n in t)e[n]=t[n]}),this)},before:function(e){return t.fn.el(this,"beforebegin",e),this},after:function(e){return t.fn.el(this,"afterend",e),this},prepend:function(e){return t.fn.el(this,"afterbegin",e),this},append:function(e){return t.fn.el(this,"beforeend",e),this},text:function(t,n){var i=e.isNodeList(this)?this:[this];if(e.isUndefined(t)){var r;return i.reduce(function(e,t,o){var s=t[n?"innerHTML":"textContent"];return r=(0===o||s===r)&&s,o===i.length-1&&r?r:e+s},"")}return i.forEach(function(e){e[n?"innerHTML":"textContent"]=t}),this},html:function(e){return this.text(e,!0)}}};return t.fn}(t),u=function(e,t,n,i,r,o){var s={init:function(){o.init(),window.jQuery||(this.init=o.noop,window.$=function(e){return o.isString(e)?document.querySelectorAll(e):e;
},NodeList.prototype.__proto__=Array.prototype,e.init(),t.init(),n.init(),i.init(),r.init())}};return s}(i,r,o,s,a,t),c=function(e){var t={get:function(t){return t.type="GET",t.url=t.url||"",t.data&&(t.data=e.isString(t.data)?t.data:e.serialise(t.data),t.url+=(t.url.indexOf("?")>=0?"&":"?")+t.data),this.request(t)},post:function(e){return e.type="POST",e.url=e.url||"",this.request(e)},request:function(t){var n=new XMLHttpRequest;return type=t.type||"GET",callback=function(t,i,r){if(e.isFunction(t)){if(r||(r=i,i=r.target.response),e.isString(i)&&/\[|\{/.test(i.slice(0,1))||!isNaN(i))try{i=JSON.parse(i)}catch(e){}t(i,r,n)}},n.addEventListener("load",function(e){200!==e.target.status&&callback(t.error,e),callback(t.complete,e)}),n.addEventListener("progress",function(e){callback(t.progress,e.lengthComputable?e.loaded/e.total:void 0,e)}),n.addEventListener("error",function(e){callback(t.error,e)}),n.addEventListener("abort",function(e){callback(t.abort,e)}),n.open(type,t.url),t.headers!==!1&&e.each(t.headers,function(e,t){n.setRequestHeader(t,e)}),"GET"!==type&&t.data?(t.header!==!1&&n.setRequestHeader("Content-Type",t.header||"application/json;charset=UTF-8"),n.send(e.isString(t.data)?t.data:JSON.stringify(t.data))):n.send(),n}};return t}(t),f=function(e,t,n,i){var r={extend:function(r){if(t.init(),r.name){var o=e.init(r.name,r.props,r.history);n.extend(r,o),n.each(n.omit(o,"props"),function(e,t){Object.defineProperty(r,t,{enumerable:!1,value:e})})}else console.warn("A view/module is unnamed - it will be unable to communicate:\r",r);return Object.defineProperty(r,"_fn",{enumerable:!1,value:n.cloneDeep(r.fn)}),Object.defineProperty(r,"XHR",{enumerable:!1,value:i}),Object.defineProperty(r,"_",{enumerable:!1,value:n}),r.Props=e,this.wrap(r.fn,r)},wrap:function(e,t){return n.each(e,function(i,o){!n.isObject(i)||n.isFunction(i)||n.isNodeList(i)||n.isJquery(i)?n.isFunction(i)&&(e[o]=function(e){return i.apply(t,arguments)}):r.wrap(i,t)}),e}};return r}(n,u,t,c),p=function(e,t){var n={extend:function(i){var r=e.extend(i);return i.uid||(i.uid=t.randomString(16)),i.bind=n.$el.bind.bind(i),i.unbind=n.$el.unbind.bind(i),i.autoBind=n.$el.autoBind.bind(i),n.$el.set(i),r},$el:{set:function(e){if(e.el=e.el||"body",e.$el=t.isString(e.el)?$(e.el):t.isDomSelection(e.el)?e.el:!!t.isString(e.el.selector)&&$(e.el.selector),!e.$el)return console.warn('View "'+e.name+'": element is incorrectly defined')},autoBind:function(e,n){n=n||":router",this.on(n+":"+(e||this.name),function(){(this.fn.render||t.noop).apply(this,arguments),this.bind()}.bind(this)),this.on(n+":before",this.unbind)},bind:function(e){e!==!0&&this.$el&&this.$el.length||n.$el.set(this),this.bindings&&this.unbind(!1),this.trigger("prebind"),this.bindings=[],t.each(this.el.bind,function(e,i){var r,o;if(t.isString(e)&&(e={selector:e}),e.selector)o={el:$(e.selector),prop:i,selector:e.selector,node:!0},this.set(o.prop,o.el,!1);else if(t.isObject(e)){r=$(i),o={input:r.is("input, textarea")||r.prop("contentEditable")===!0,prop:e.to,$el:r,selector:i,fn:function(n){o.$el.forEach(function(i){if(o.current!==i){var r=t.isFunction(s)?s(n,i,!0):n;t.isUndefined(r)||i.prop(e.set,r)}})}},e.set=e.set||(o.input?"value":"textContent");var s=!!e.fn&&e.fn.split(":").reduce(function(e,n){return!!t.isObject(e)&&e[n]},this.fn),a=t.isUndefined(e.val)?this.Props.get(this.name+":"+o.prop)||o.$el.prop(e.set):e.val;this.on(o.prop,o.fn),this.Props.get(this.name+":"+o.prop,a,!0),o.input&&this.$el.on(n.$el.event("input change",this),o.selector,function(n){o.current=n.target;var i=n.target[e.set],r=t.isFunction(s)?s(i,n.target,!1):i;this.set(o.prop,r),o.current=!1}.bind(this))}o&&e.on&&t.each(e.on,function(e,t){n.$el.fn(t,o.selector,e,this)},this),this.bindings.push(o)},this),t.each(this.el.on,function(e,t){n.$el.fn(t,!1,e,this)},this),this.trigger("bind")},fn:function(e,i,r,o){t.isObject(r)&&r.delegate&&r.fn&&(i=t.isString(i)?i+" "+r.delegate:r.delegate,r=r.fn),t.isString(r)&&(r=r.split(":").reduce(function(e,n){return!!t.isObject(e)&&e[n]},o.fn)),t.isFunction(r)&&(e=n.$el.event(e,o),r=r.bind(o),i?o.$el.on(e,i,r):o.$el.on(e,r))},unbind:function(e){this.bindings&&(e!==!1&&this.trigger("preunbind"),this.$el.off(".bind-"+(this.uid||this.name)),t.each(this.bindings,function(e){e.node?this.unset(e.prop):this.off(e.prop,e.fn)},this),this.bindings=!1,e!==!1&&this.trigger("unbind"))},event:function(e,t){return e.replace(/( |$)/g,".bind-"+(t.uid||t.name)+"$1")}}};return n}(f,t),l=function(e,t){var n='<% if( obj.missing ){ %>Missing a BASE tag<% }else{ %>BASE tag is incorrect<% } %>. If this is a production site include the following below your <title>:\n<base href="<%= base %>">',i={extend:function(n){return t.defaultsDeep(n.fn,i.fn),n.start=function(){this.fn.start.apply(this,arguments)},e.extend(n)},fn:{start:function(e,i){window.onpopstate=function(e){e.state&&this.fn.route.href({href:e.state.href,replace:!0})}.bind(this);var r=$("head base"),o=this._.cookie("base");this.props.base=e||this.props.base||o||r.attr("href")||window.location.origin,0!==this.props.base.indexOf(location.origin)&&(this.props.base=location.origin+this.props.base),r.length?r.attr("href")!==this.props.base&&(r.attr("href",this.props.base),o||console.warn(t.template(n)({base:this.props.base}))):($("head title").after('<base href="'+this.props.base+'">'),o||console.warn(t.template(n)({base:this.props.base,missing:!0}))),this.props.title=$("head title").text(),t.each(this.props.routes,this.fn.route.set),this.on("href",this.fn.route.href),$("body").on("click","a:not([data-external])",this.fn.anchor),this.trigger("start"),this.set("href",{href:i||location.href.replace(this.props.base,""),replace:!0},!0)},anchor:function(e){if(0===e.delegateTarget.href.indexOf(this.props.base)){var t=e.delegateTarget,n=t.getAttribute("href").replace(/^\//,"");http="http"===t.href.slice(0,4),target=t.target||"_self","_self"!==target||"#"===n.slice(0,1)||!http||e.ctrlKey||e.metaKey||(e.preventDefault(),this.fn.route.href(n))}},route:{href:function(e){t.isString(e)?e={href:e}:this.set("href",e.href,!1);var n,i,r,o=e.href,s=[],a=t.find(this.props.routes,function(e){s=o.match(e.re);for(var t in s)s[t]=isNaN(s[t])?s[t]:+s[t];return s})||{};s||(s=[]),n=[a.name].concat(s.slice(1)),i=e.replace||[o,this.props.base+o].indexOf(window.location.href)>=0,r=e.trigger!==!1,r&&this.trigger.apply(this,["before"].concat(n)),window.history.pushState||window.open(o,"_self"),i?window.history.replaceState({href:o},a.title,o):window.history.pushState({href:o},a.title,o),document.title=a.title,$("body").attr("data-route",a.name),this.set("current",{href:o,name:a.name,args:s.slice(1)},r),r&&this.trigger.apply(this,n),r&&this.trigger.apply(this,["after"].concat(n))},set:function(e,n,i){t.isObject(e)||(e={route:e}),e.name=n,e.title=(e.title||n.slice(0,1).toUpperCase()+n.slice(1))+(this.props.delimeter||" | ")+this.props.title,e.re=e.re||t.isRegExp(e.route)?e.route:this.fn.route.re(e.route),i[n]=e},re:function(e){var t={optional:/\((.*?)\)/g,named:/(\(\?)?:\w+/g,path:/\*\w+/g,escape:/[\-{}\[\]+?.,\\\^$|#\s]/g};return e=e.replace(t.escape,"\\$&").replace(t.optional,"(?:$1)?").replace(t.named,function(e,t){return t?e:"([^/?]+)"}).replace(t.path,"([^?]*?)"),new RegExp("^"+e+"(?:\\?[\\s\\S]*)?$")}}}};return i}(f,t),d=function(t,n,i,r,o,s){var a={version:"0.1.2",View:t,Module:n,Router:i,Props:r,_:o,XHR:s};return"undefined"!=typeof e&&(e=a),a}(p,f,l,n,t,c)}(),e},"MediumFramework"),define("controller/router",["framework"],function(e){return e.Router.extend({name:"router",props:{routes:{home:"",adani:{title:"What is Adani?",route:"what-is-adani"},involved:{title:"How to get involved",route:"how-to-get-involved"},events:"local-events",news:"in-the-news",missing:"*missing"}},fn:{init:function(){sessionStorage.redirect&&(history.replaceState(null,null,sessionStorage.redirect),delete sessionStorage.redirect),this.on(":router:before",this.fn.on.before),this.start()},on:{before:function(){$("body").attr("data-route-prev",this.props.current?this.props.current.name:"")}}}})}),define("text",["module"],function(e){"use strict";var t,n,i,r,o,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,u=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,f=c&&location.protocol&&location.protocol.replace(/\:/,""),p=c&&location.hostname,l=c&&(location.port||void 0),d={},h=e.config&&e.config()||{};return t={version:"2.0.10",strip:function(e){if(e){e=e.replace(a,"");var t=e.match(u);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:h.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){n=s[t];try{e=new ActiveXObject(n)}catch(e){}if(e){s=[n];break}}return e},parseName:function(e){var t,n,i,r=!1,o=e.indexOf("."),s=0===e.indexOf("./")||0===e.indexOf("../");return o!==-1&&(!s||o>1)?(t=e.substring(0,o),n=e.substring(o+1,e.length)):t=e,i=n||t,o=i.indexOf("!"),o!==-1&&(r="strip"===i.substring(o+1),i=i.substring(0,o),n?n=i:t=i),{moduleName:t,ext:n,strip:r}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,i,r){var o,s,a,u=t.xdRegExp.exec(e);return!u||(o=u[2],s=u[3],s=s.split(":"),a=s[1],s=s[0],!(o&&o!==n||s&&s.toLowerCase()!==i.toLowerCase()||(a||s)&&a!==r))},finishLoad:function(e,n,i,r){i=n?t.strip(i):i,h.isBuild&&(d[e]=i),r(i)},load:function(e,n,i,r){if(r.isBuild&&!r.inlineText)return void i();h.isBuild=r.isBuild;var o=t.parseName(e),s=o.moduleName+(o.ext?"."+o.ext:""),a=n.toUrl(s),u=h.useXhr||t.useXhr;return 0===a.indexOf("empty:")?void i():void(!c||u(a,f,p,l)?t.get(a,function(n){t.finishLoad(e,o.strip,n,i)},function(e){i.error&&i.error(e)}):n([s],function(e){t.finishLoad(o.moduleName+"."+o.ext,o.strip,e,i)}))},write:function(e,n,i,r){if(d.hasOwnProperty(n)){var o=t.jsEscape(d[n]);i.asModule(e+"!"+n,"define(function () { return '"+o+"';});\n")}},writeFile:function(e,n,i,r,o){var s=t.parseName(n),a=s.ext?"."+s.ext:"",u=s.moduleName+a,c=i.toUrl(s.moduleName+a)+".js";t.load(u,i,function(n){var i=function(e){return r(c,e)};i.asModule=function(e,t){return r.asModule(e,c,t)},t.write(e,u,i,o)},o)}},"node"===h.env||!h.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),t.get=function(e,t,i){try{var r=n.readFileSync(e,"utf8");0===r.indexOf("\ufeff")&&(r=r.substring(1)),t(r)}catch(e){i(e)}}):"xhr"===h.env||!h.env&&t.createXhr()?t.get=function(e,n,i,r){var o,s=t.createXhr();if(s.open("GET",e,!0),r)for(o in r)r.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),r[o]);h.onXhr&&h.onXhr(s,e),s.onreadystatechange=function(t){var r,o;4===s.readyState&&(r=s.status,r>399&&r<600?(o=new Error(e+" HTTP status: "+r),o.xhr=s,i(o)):n(s.responseText),h.onXhrComplete&&h.onXhrComplete(s,e))},s.send(null)}:"rhino"===h.env||!h.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,i,r="utf-8",o=new java.io.File(e),s=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),r)),u="";try{for(n=new java.lang.StringBuffer,i=a.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=a.readLine());)n.append(s),n.append(i);u=String(n.toString())}finally{a.close()}t(u)}:("xpconnect"===h.env||!h.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,r=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in i,t.get=function(e,t){var n,s,a,u={};o&&(e=e.replace(/\//g,"\\")),a=new FileUtils.File(e);try{n=i["@mozilla.org/network/file-input-stream;1"].createInstance(r.nsIFileInputStream),n.init(a,1,0,!1),s=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(r.nsIConverterInputStream),s.init(n,"utf-8",n.available(),r.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(n.available(),u),s.close(),n.close(),t(u.value)}catch(e){throw new Error((a&&a.path||"")+": "+e)}}),t}),define("text!template/home.html",[],function(){return'<main class="main" role="main">\n\n\n</main>\n<!-- /main -->\n'}),define("view/home",["framework","text!template/home.html"],function(e,t){return e.View.extend({name:"home",el:{selector:"body",bind:{"$el:main":".main"},on:{}},props:{},fn:{init:function(){this.bind()},on:{},render:function(){}}})}),define("view/adani",["framework","text!template/home.html"],function(e,t){return e.View.extend({name:"adani",el:{selector:".main",bind:{"$el:main":".main"},on:{}},props:{},fn:{init:function(){this.autoBind()},render:function(){this.bind();var e=window.pageYOffset||document.documentElement.scrollTop,t=e+$(".facebook").eq(0).getBoundingClientRect().top;window.scroll(0,t-$(".nav--outer").eq(0).clientHeight),$("#nav--toggle").eq(0).checked=!1}}})}),define("view/hero",["framework"],function(e,t){return e.View.extend({name:"header",el:{selector:".header",bind:{"$el:hero":".hero","$el:title":".hero--items"},on:{}},props:{},fn:{init:function(){this.bind(),this.fn.update()},update:function(){clearTimeout(this.props.timeout),this.props.$el.title.removeClass("reverse"),this.props.$el.title.eq(0).dataset.active=+this.props.$el.title.eq(0).dataset.active%5+1,this.props.timeout=setTimeout(function(){this.props.$el.title.addClass("reverse"),this.props.timeout=setTimeout(this.fn.update,1500)}.bind(this),7e3)},render:function(){}}})}),define("view/video",["framework"],function(e){return e.View.extend({name:"video",el:{selector:".video",bind:{"$el:iframe":".video iframe","$el:player":".video video"},on:{}},props:{},fn:{init:function(){this.bind(),this.props.$el.player.on("playing",this.fn.on.ready),$(window).on("resize",this.fn.on.resize),this.fn.on.resize()},on:{resize:function(){var e=this.props.$el.player.eq(0),t=e.dataset.srcSizes.split(",").reduce(function(e,t){if(e)return e;var n=t.split("|"),i=n[1]?+n[1]:0;return window.innerWidth<=i?n[0]||"":e},"");t!==this.props.size&&(this.props.size=t,e.dataset.size=t,e.muted=!0,e.src=t?e.dataset.src.replace(/\.[^.]+$/,"_"+t+"$&"):e.dataset.src)},ready:function(){this.$el.eq(0).dataset.ready=""}}}})}),define("view/signup",["framework"],function(e,t){return e.View.extend({name:"signup",el:{selector:"body",bind:{"$el:signup:container":".signup","$el:signup:form":".signup form","$el:signup:name":"#name","$el:signup:email":"#email","$el:signup:botcheck":"#noname"},on:{submit:{delegate:".signup form",fn:"on:submit"},"focusin.signup focusout.signup":{delegate:".signup input",fn:"on:focus"},"input.signup":{delegate:".signup input",fn:"on:input"},"click.reset":{delegate:".overlay--error .button--generic",fn:"on:reset"}}},props:{},fn:{init:function(){this.bind(),this.on(":router:involved",this.fn.render)},on:{focus:function(e){e&&"focusin"==e.type?this.props.$el.signup.container.addClass("focus"):this.props.$el.signup.container.removeClass("focus")},input:function(e){this.props.name=this.props.$el.signup.name.eq(0).value,this.props.email=this.props.$el.signup.email.eq(0).value,this.props.name||this.props.email?this.props.$el.signup.container.addClass("open"):this.props.$el.signup.container.removeClass("open"),e&&(e.target.parentElement.dataset.value=e.target.value)},submit:function(e){if(e.preventDefault(),this.props.name&&this.props.email&&!this.props.$el.signup.botcheck.eq(0).value){var t=this.props.name.replace(/^(\S*)\s?.*/,"$1").toLowerCase(),n=this.props.name.replace(/^(\S*)\s?(.*)/,"$2").toLowerCase(),i={FNAME:t.slice(0,1).toUpperCase()+t.slice(1),LNAME:n.split(" ").map(function(e){return e.slice(0,1).toUpperCase()+e.slice(1)}).join(" "),EMAIL:this.props.email.toLowerCase()};this.fn.state("loading"),require([this.props.$el.signup.form.eq(0).action+"&"+this._.serialise(i)],function(e){e.result&&"success"===e.result?this.fn.state("success"):this.fn.state("error")}.bind(this))}},reset:function(e){e.preventDefault(),this.fn.state("")}},state:function(e){this.props.$el.signup.container.eq(0).dataset.state=e},render:function(){this.props.$el.signup.container.eq(0).scrollIntoView({behaviour:"smooth"}),$("#nav--toggle").eq(0).checked=!1}}})}),define("app",["framework","controller/router","view/home","view/adani","view/hero","view/video","view/signup"],function(e,t,n,i,r,o,s){return e.Module.extend({name:"app",fn:{init:function(){n.init(),i.init(),r.init(),o.init(),s.init(),t.init()}}})}),function(e){e.config({urlArgs:"bust="+(new Date).getTime(),waitSeconds:0,paths:{framework:"vendor/medium-framework-0.1.2",text:"vendor/require/require.text-2.0.10",template:"../templates"}}),e(["app"],function(e){e.init()})}(require),define("_require",function(){}),require(["_require"])}();